-- ========================================
-- 企业级诗词APP后端服务数据库初始化数据脚本
-- 作者: Sakura Huang
-- 创建时间: 2025-09-03
-- 版本: 1.0.0
-- 描述: 插入基础数据和测试数据
-- ========================================

USE `poetry_app_dev`;

-- ========================================
-- 1. 用户管理模块初始数据
-- ========================================

-- 插入默认角色
INSERT INTO `sys_role` (`role_name`, `role_code`, `description`, `sort_order`, `status`, `created_by`)
VALUES ('超级管理员', 'SUPER_ADMIN', '拥有系统所有权限的超级管理员', 1, 1, 1),
       ('系统管理员', 'ADMIN', '系统管理员，拥有大部分系统管理权限', 2, 1, 1),
       ('内容管理员', 'CONTENT_ADMIN', '负责诗词内容的管理和审核', 3, 1, 1),
       ('普通用户', 'USER', '普通注册用户，可以浏览和收藏诗词', 4, 1, 1),
       ('VIP用户', 'VIP_USER', 'VIP用户，享有更多功能权限', 5, 1, 1);

-- 插入默认用户（密码为：123456，使用BCrypt加密）
INSERT INTO `sys_user` (`username`, `nickname`, `email`, `password`, `status`, `created_by`)
VALUES ('admin', '系统管理员', 'admin@poetry.com', '$2a$10$7JB720yubVSQLVOOK0nS3e/bQSzJrHy.T24wHx6RMdNuIcjHSHnSa', 1,
        1),
       ('sakura', '樱花诗人', 'sakura@poetry.com', '$2a$10$7JB720yubVSQLVOOK0nS3e/bQSzJrHy.T24wHx6RMdNuIcjHSHnSa', 1,
        1),
       ('poet_editor', '诗词编辑', 'editor@poetry.com', '$2a$10$7JB720yubVSQLVOOK0nS3e/bQSzJrHy.T24wHx6RMdNuIcjHSHnSa',
        1, 1),
       ('test_user', '测试用户', 'test@poetry.com', '$2a$10$7JB720yubVSQLVOOK0nS3e/bQSzJrHy.T24wHx6RMdNuIcjHSHnSa', 1,
        1);

-- 插入用户角色关联
INSERT INTO `sys_user_role` (`user_id`, `role_id`, `created_by`)
VALUES (1, 1, 1), -- admin -> SUPER_ADMIN
       (2, 2, 1), -- sakura -> ADMIN
       (3, 3, 1), -- poet_editor -> CONTENT_ADMIN
       (4, 4, 1);
-- test_user -> USER

-- ========================================
-- 2. 诗词内容模块初始数据
-- ========================================

-- 插入诗词分类
INSERT INTO `poetry_category` (`category_name`, `category_code`, `parent_id`, `level`, `sort_order`, `description`,
                               `status`, `created_by`)
VALUES ('诗', 'SHI', 0, 1, 1, '古代诗歌总类', 1, 1),
       ('词', 'CI', 0, 1, 2, '古代词作总类', 1, 1),
       ('曲', 'QU', 0, 1, 3, '古代曲作总类', 1, 1),
       ('赋', 'FU', 0, 1, 4, '古代赋作总类', 1, 1),

-- 诗的二级分类
       ('五言绝句', 'WYJJ', 1, 2, 11, '五言四句诗', 1, 1),
       ('七言绝句', 'QYJJ', 1, 2, 12, '七言四句诗', 1, 1),
       ('五言律诗', 'WYLS', 1, 2, 13, '五言八句诗', 1, 1),
       ('七言律诗', 'QYLS', 1, 2, 14, '七言八句诗', 1, 1),
       ('古体诗', 'GTS', 1, 2, 15, '不拘格律的古诗', 1, 1),

-- 词的二级分类
       ('小令', 'XL', 2, 2, 21, '短调词作', 1, 1),
       ('中调', 'ZD', 2, 2, 22, '中等长度词作', 1, 1),
       ('长调', 'CD', 2, 2, 23, '长篇词作', 1, 1),

-- 主题分类
       ('山水田园', 'SSTG', 0, 1, 5, '描写自然山水田园的诗词', 1, 1),
       ('边塞军旅', 'BSJL', 0, 1, 6, '描写边塞生活和军旅征战的诗词', 1, 1),
       ('送别思乡', 'SBSX', 0, 1, 7, '表达离别和思乡之情的诗词', 1, 1),
       ('爱情婚姻', 'AQHY', 0, 1, 8, '描写爱情和婚姻生活的诗词', 1, 1),
       ('咏史怀古', 'YSHG', 0, 1, 9, '咏史和怀古题材的诗词', 1, 1),
       ('哲理人生', 'ZLRS', 0, 1, 10, '包含哲理和人生感悟的诗词', 1, 1);

-- 插入朝代数据
INSERT INTO `dynasty` (`dynasty_name`, `dynasty_code`, `start_year`, `end_year`, `description`, `sort_order`, `status`,
                       `created_by`)
VALUES ('先秦', 'XQ', -2070, -221, '夏商周时期，中国文学的起源阶段', 1, 1, 1),
       ('秦朝', 'QIN', -221, -206, '中国第一个统一的封建王朝', 2, 1, 1),
       ('西汉', 'XH', -206, 25, '汉朝前期，文学繁荣发展', 3, 1, 1),
       ('东汉', 'DH', 25, 220, '汉朝后期，诗歌艺术进一步发展', 4, 1, 1),
       ('魏晋南北朝', 'WJNBC', 220, 589, '政治动荡，文学多元化发展', 5, 1, 1),
       ('隋朝', 'SUI', 581, 618, '短暂统一王朝，承前启后', 6, 1, 1),
       ('唐朝', 'TANG', 618, 907, '中国诗歌的黄金时代', 7, 1, 1),
       ('五代十国', 'WDSG', 907, 979, '政权分裂时期，词体兴起', 8, 1, 1),
       ('宋朝', 'SONG', 960, 1279, '词的全盛时期', 9, 1, 1),
       ('元朝', 'YUAN', 1271, 1368, '散曲发展的重要时期', 10, 1, 1),
       ('明朝', 'MING', 1368, 1644, '古典文学的总结时期', 11, 1, 1),
       ('清朝', 'QING', 1644, 1912, '传统文学的最后繁荣', 12, 1, 1);

-- 插入著名诗人数据
INSERT INTO `poet` (`poet_name`, `poet_alias`, `dynasty_id`, `birth_year`, `death_year`, `birthplace`, `biography`,
                    `achievements`, `representative_works`, `status`, `created_by`)
VALUES ('李白', '字太白，号青莲居士', 7, 701, 762, '陇西成纪（今甘肃天水）',
        '唐代伟大的浪漫主义诗人，被誉为"诗仙"。其诗风雄奇豪放，想象丰富，语言自然清新。',
        '创作了大量优秀诗歌，对后世影响深远，是中国文学史上的重要人物。', '《静夜思》《将进酒》《蜀道难》《早发白帝城》', 1, 1),
       ('杜甫', '字子美，号少陵野老', 7, 712, 770, '河南巩义',
        '唐代伟大的现实主义诗人，被誉为"诗圣"。其诗忧国忧民，反映社会现实，格律严谨。',
        '创作"三吏""三别"等不朽名篇，被后人尊为"诗圣"。', '《春夜喜雨》《登高》《茅屋为秋风所破歌》', 1, 1),
       ('白居易', '字乐天，号香山居士', 7, 772, 846, '河南新郑',
        '唐代现实主义诗人，倡导新乐府运动。其诗通俗易懂，贴近民生。', '创作《长恨歌》《琵琶行》等长篇叙事诗，影响深远。',
        '《静夜思》《赋得古原草送别》《忆江南》', 1, 1),
       ('王维', '字摩诘，号摩诘居士', 7, 699, 759, '山西祁县',
        '唐代山水田园诗人，与孟浩然并称"王孟"。其诗画意盎然，禅意深远。', '开创山水田园诗派，被誉为"诗佛"。',
        '《相思》《山居秋暝》《鹿柴》', 1, 1),
       ('李商隐', '字义山，号玉谿生', 7, 813, 858, '河南荥阳', '晚唐著名诗人，以七律和无题诗著称。其诗意象繁复，情感深沉。',
        '与杜牧并称"小李杜"，开创朦胧诗风。', '《无题》《锦瑟》《夜雨寄北》', 1, 1),
       ('苏轼', '字子瞻，号东坡居士', 9, 1037, 1101, '四川眉山', '北宋文学家，唐宋八大家之一。其词开豪放一派，影响后世。',
        '文章、诗词、书画皆精，被誉为全才。', '《水调歌头·明月几时有》《念奴娇·赤壁怀古》', 1, 1),
       ('李清照', '号易安居士', 9, 1084, 1155, '山东济南', '宋代著名女词人，婉约词派代表。其词清新自然，情感真挚。',
        '被誉为"千古第一才女"，词作具有很高艺术价值。', '《声声慢》《如梦令》《一剪梅》', 1, 1),
       ('辛弃疾', '字幼安，号稼轩', 9, 1140, 1207, '山东济南', '南宋豪放派词人，与苏轼并称"苏辛"。其词气势雄壮，爱国情深。',
        '创作大量爱国词作，艺术成就很高。', '《青玉案·元夕》《破阵子》《永遇乐·京口北固亭怀古》', 1, 1);

-- 插入经典诗词作品
INSERT INTO `poetry` (`title`, `poet_id`, `dynasty_id`, `category_id`, `content`, `translation`, `annotation`,
                      `appreciation`, `background`, `tags`, `difficulty_level`, `word_count`, `verse_count`, `status`,
                      `publish_time`, `created_by`)
VALUES ('静夜思', 1, 7, 5, '床前明月光，疑是地上霜。\n举头望明月，低头思故乡。',
        '明亮的月光洒在床前，怀疑是地上的白霜。\n抬头望着明月，低头思念故乡。',
        '床：坐具，这里指坐卧的地方。疑：怀疑，以为。举头：抬头。',
        '这首诗写的是诗人在寂静的月夜思念家乡的感受。诗人用简洁明快的语言，表达了游子思乡的深情。',
        '这首诗作于诗人离乡之后的某个月夜，当时诗人看到月光，触景生情，思念起了家乡。', '思乡,月夜,游子', 1, 20, 4, 1,
        NOW(), 1),

       ('春夜喜雨', 2, 7, 9,
        '好雨知时节，当春乃发生。\n随风潜入夜，润物细无声。\n野径云俱黑，江船火独明。\n晓看红湿处，花重锦官城。',
        '好雨知道适合下雨的时节，春天来到就及时降临。\n伴随春风在夜里悄悄降临，滋润万物轻柔而无声。\n荒野小径和天空都被乌云遮黑，只有江船上的灯火格外明亮。\n天亮时看那被雨打湿的花朵，沉甸甸地开满了锦官城。',
        '知时节：懂得时令。乃：就。潜：悄悄地。润物：滋润万物。野径：田野间的小路。锦官城：成都的别称。',
        '这首诗赞美春雨的及时和无声滋润。诗人用拟人手法，赋予春雨以人的品格，表现了诗人对春雨的喜爱和对自然的热爱。',
        '这首诗作于诗人在成都草堂居住期间，当时正值春天，一场及时雨让诗人欣喜不已。', '春雨,田园,成都', 2, 40, 8, 1, NOW(),
        1),

       ('相思', 4, 7, 17, '红豆生南国，春来发几枝。\n愿君多采撷，此物最相思。',
        '红豆生长在南方，春天来了不知长出多少新枝。\n希望你多多采摘，这东西最能寄托相思之情。',
        '红豆：又名相思子，常用来象征爱情或相思。南国：南方。采撷：采摘。',
        '这首诗以红豆起兴，表达了对朋友的思念之情。诗人借物咏怀，通过对红豆的描述，寄托了深深的相思之情。',
        '这首诗是诗人思念朋友时所作，用红豆这一传统的相思之物来表达情感。', '相思,友情,红豆', 1, 20, 4, 1, NOW(), 1),

       ('水调歌头·明月几时有', 6, 9, 11,
        '明月几时有？把酒问青天。不知天上宫阙，今夕是何年。我欲乘风归去，又恐琼楼玉宇，高处不胜寒。起舞弄清影，何似在人间。\n转朱阁，低绮户，照无眠。不应有恨，何事长向别时圆？人有悲欢离合，月有阴晴圆缺，此事古难全。但愿人长久，千里共婵娟。',
        '明月什么时候开始有的呢？端起酒杯问问青天。不知道天上的宫殿，今晚是什么年代。我想乘风回到天上，又担心在玉石砌成的美丽建筑里，受不住高处的寒冷。翩翩起舞玩赏着月下清影，哪里比得上人间。\n月光转过朱红色的楼阁，低低地挂在雕花的窗户上，照着没有睡意的人。月亮不应该对人们有什么怨恨吧，为什么总是在人们离别的时候才圆呢？人有悲欢离合的变迁，月有阴晴圆缺的转换，这种事自古来难以周全。只希望这世上所有人的亲人能平安健康，即便相隔千里，也能共享这美好的月光。',
        '把酒：举杯。宫阙：宫殿。琼楼玉宇：美玉砌成的楼宇，指月中宫殿。绮户：雕花的窗户。婵娟：美好的样子，这里指嫦娥，也指明月。',
        '这首词是苏轼的代表作之一，通过描写月圆之夜的所见所感，表达了对人生哲理的思考和对美好生活的向往。词中既有对天上神仙世界的向往，又有对人间生活的眷恋，体现了诗人乐观旷达的人生态度。',
        '这首词作于宋神宗熙宁九年（1076年）的中秋节，当时苏轼在密州做知州，因为政治失意而心情郁闷，又值中秋佳节，便写下这首词表达自己的情感。',
        '中秋,月亮,人生哲理,思念', 2, 95, 16, 1, NOW(), 1),

       ('声声慢·寻寻觅觅', 7, 9, 11,
        '寻寻觅觅，冷冷清清，凄凄惨惨戚戚。乍暖还寒时候，最难将息。三杯两盏淡酒，怎敌他、晚来风急？雁过也，正伤心，却是旧时相识。\n满地黄花堆积，憔悴损，如今有谁堪摘？守着窗儿，独自怎生得黑？梧桐更兼细雨，到黄昏、点点滴滴。这次第，怎一个愁字了得！',
        '苦苦地寻寻觅觅，却只见冷冷清清，怎不让人凄惨悲戚。乍暖还寒的时节，最难保养休息。喝三杯两盏淡酒，怎么能抵得住早晨的寒风急袭？雁群飞过，正令人伤心，却是旧日的相识。\n园中菊花堆满地，都已经憔悴不堪，如今还有谁来采摘？冷清清地守着窗子，独自一个人怎么熬到天黑？梧桐叶上细雨淋漓，到黄昏时分，那雨声还在滴滴。这般情景，怎么能用一个"愁"字了结！',
        '将息：休养。堪：可以，能够。怎生：怎样。这次第：这样的情形。',
        '这首词是李清照晚年的作品，通过描写一个秋日黄昏的所见所感，表达了词人晚年生活的孤独和内心的无限愁苦。全词采用白描手法，语言朴素自然，却蕴含着深深的悲凉。',
        '这首词作于李清照南渡之后，当时她已经丧夫，独自一人生活在江南，生活困顿，心情愁苦，便写下这首词抒发内心的悲凉。',
        '愁苦,孤独,晚年,秋景', 3, 66, 12, 1, NOW(), 1);

-- ========================================
-- 3. 系统配置初始数据
-- ========================================

-- 插入系统配置
INSERT INTO `sys_config` (`config_key`, `config_value`, `config_name`, `config_type`, `config_group`, `description`,
                          `is_system`, `sort_order`, `status`, `created_by`)
VALUES ('system.name', '企业级诗词APP后端服务', '系统名称', 'string', 'system', '系统显示名称', 1, 1, 1, 1),
       ('system.version', '1.0.0', '系统版本', 'string', 'system', '当前系统版本号', 1, 2, 1, 1),
       ('system.author', 'Sakura Huang', '系统作者', 'string', 'system', '系统开发作者', 1, 3, 1, 1),
       ('system.copyright', 'Copyright © 2025 Sakura Huang. All rights reserved.', '版权信息', 'string', 'system',
        '系统版权信息', 1, 4, 1, 1),

       ('upload.max.size', '10485760', '文件上传最大大小', 'number', 'upload', '文件上传最大大小（字节）', 0, 11, 1, 1),
       ('upload.allowed.types', 'jpg,jpeg,png,gif,pdf,doc,docx', '允许上传的文件类型', 'string', 'upload',
        '允许上传的文件扩展名', 0, 12, 1, 1),

       ('jwt.expiration', '604800', 'JWT过期时间', 'number', 'security', 'JWT访问令牌过期时间（秒）', 0, 21, 1, 1),
       ('jwt.refresh.expiration', '1209600', 'JWT刷新令牌过期时间', 'number', 'security', 'JWT刷新令牌过期时间（秒）', 0,
        22, 1, 1),

       ('poetry.daily.limit', '100', '每日推荐诗词数量', 'number', 'poetry', '系统每日推荐的诗词数量', 0, 31, 1, 1),
       ('poetry.hot.threshold', '1000', '热门诗词阈值', 'number', 'poetry', '诗词成为热门的浏览量阈值', 0, 32, 1, 1),

       ('comment.audit.enabled', 'true', '评论审核开关', 'boolean', 'comment', '是否开启评论内容审核', 0, 41, 1, 1),
       ('comment.max.length', '500', '评论最大长度', 'number', 'comment', '用户评论内容的最大字符数', 0, 42, 1, 1);

-- ========================================
-- 4. 创建默认收藏夹
-- ========================================

-- 为测试用户创建默认收藏夹
INSERT INTO `collection_folder` (`user_id`, `folder_name`, `description`, `is_public`, `created_time`)
VALUES (4, '我的收藏', '默认收藏夹', 0, NOW()),
       (4, '经典诗词', '收藏的经典诗词作品', 1, NOW()),
       (2, '管理员收藏', '管理员精选诗词', 1, NOW());